{"meta":{"title":"Hexo","subtitle":"","description":"","author":"John Doe","url":"http://example.com","root":"/"},"pages":[],"posts":[{"title":"vip 原理","slug":"vip-原理","date":"2020-10-22T02:31:00.000Z","updated":"2020-11-09T10:00:16.995Z","comments":true,"path":"2020/10/22/vip-原理/","link":"","permalink":"http://example.com/2020/10/22/vip-%E5%8E%9F%E7%90%86/","excerpt":"","text":"keepalived + haproxy 为k8s集群提供高可用能力 haproxy 作用： worker节点连接apiserver,用haproxy将后端所有apiserver做LB ,在kubespray项目中，也可用本地nginx实现 keepalived 通过vrrp协议竞争VIP，虚IP 机器准备master+worker10.0.112.18110.0.112.18210.0.112.183 vip10.0.112.184 keepalived安装,原默认配置文件备份ansible all -m shell -a “yum install -y keepalived”ansible all -m shell -a “mv /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.conf.d” vim /etc/keepalived/keepalived.conf 181 这台机器123456789101112131415161718192021222324252627282930313233global_defs &#123; enable_script_security&#125;vrrp_script haproxy-check &#123; user root script &quot;&#x2F;bin&#x2F;bash &#x2F;etc&#x2F;keepalived&#x2F;check_haproxy.sh&quot; interval 3 weight -2 fall 10 rise 2&#125;vrrp_instance haproxy-vip &#123; state BACKUP priority 101 interface eth0 virtual_router_id 47 advert_int 3 unicast_src_ip 10.0.112.181 unicast_peer &#123; 10.0.112.182 10.0.112.183 &#125; virtual_ipaddress &#123; 10.0.112.184&#x2F;32 &#125; track_script &#123; haproxy-check &#125;&#125; 182 这台机器123456789101112131415161718192021222324252627282930313233global_defs &#123; enable_script_security&#125;vrrp_script haproxy-check &#123; user root script &quot;&#x2F;bin&#x2F;bash &#x2F;etc&#x2F;keepalived&#x2F;check_haproxy.sh&quot; interval 3 weight -2 fall 10 rise 2&#125;vrrp_instance haproxy-vip &#123; state BACKUP priority 101 interface eth0 virtual_router_id 47 advert_int 3 unicast_src_ip 10.0.112.182 unicast_peer &#123; 10.0.112.181 10.0.112.183 &#125; virtual_ipaddress &#123; 10.0.112.184&#x2F;32 &#125; track_script &#123; haproxy-check &#125;&#125; 183 这台机器123456789101112131415161718192021222324252627282930313233global_defs &#123; enable_script_security&#125;vrrp_script haproxy-check &#123; user root script &quot;&#x2F;bin&#x2F;bash &#x2F;etc&#x2F;keepalived&#x2F;check_haproxy.sh&quot; interval 3 weight -2 fall 10 rise 2&#125;vrrp_instance haproxy-vip &#123; state BACKUP priority 101 interface eth0 virtual_router_id 47 advert_int 3 unicast_src_ip 10.0.112.183 unicast_peer &#123; 10.0.112.181 10.0.112.182 &#125; virtual_ipaddress &#123; 10.0.112.184&#x2F;32 &#125; track_script &#123; haproxy-check &#125;&#125; haproxy 安装ansible all -m yum -a ‘name=haproxy’","categories":[],"tags":[]},{"title":"hello k8s","slug":"hello-k8s","date":"2020-10-22T02:21:08.000Z","updated":"2020-10-22T02:22:02.712Z","comments":true,"path":"2020/10/22/hello-k8s/","link":"","permalink":"http://example.com/2020/10/22/hello-k8s/","excerpt":"","text":"hello dsdasad","categories":[],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2020-10-20T07:42:43.758Z","updated":"2020-10-20T07:42:43.758Z","comments":true,"path":"2020/10/20/hello-world/","link":"","permalink":"http://example.com/2020/10/20/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]},{"title":"harbor 并发token失效","slug":"harbor-并发token失效","date":"2018-11-11T06:06:39.000Z","updated":"2020-11-11T06:08:08.041Z","comments":true,"path":"2018/11/11/harbor-并发token失效/","link":"","permalink":"http://example.com/2018/11/11/harbor-%E5%B9%B6%E5%8F%91token%E5%A4%B1%E6%95%88/","excerpt":"","text":"harbor 中token生成由jwt框架，为每个push,pull请求携带token","categories":[],"tags":[]}],"categories":[],"tags":[]}